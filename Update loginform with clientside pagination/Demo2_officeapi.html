<!DOCTYPE html>
<html>

<head>
    <title>Demo2_officeapi</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/fontawesome.min.css">
    <link rel="stylesheet" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="E:\Gaurav\Javascript\Pagination-project\JS\tableManager.js"></script>
    <style>
        .mb-3 {
            width: 100px;
            height: 100px;
        }

        .image {
            display: flex;
            justify-content: center;
        }

        #col3 {
            display: flex;
            justify-content: right;
            height: 40px;
        }
    </style>
</head>

<body>
    
    <div class="containere">
        <div class="row">
            <div class="col">

            </div>
            <div class="col">
                <div class="image">
                    <img class="mb-3" src="react-logo.png"><br>
                    
                </div>
            </div>
            <div class="col" id="col3">
                <a href="file:///E:/Gaurav/Html/Form1.html"><button class="btn btn-primary btn-lg btn-block">Edit
                    profile</button></a>
                <!-- <button type="button" class="btn btn-primary" id="btn2">Log Out</button> -->
            </div>
        </div>
        <div class="row">
            <div class="col">
                <b><a href="file:///E:/Gaurav/Javascript/Server_side_pagination/Tablemanager_formate.html">Click Here to view Table
                        manager formate</a></b><br>
                <b><a href="file:///E:/Gaurav/Javascript/Server_side_pagination/Pagination.html">Click Here to view Data
                        Table formate</a></b>
            </div>
            <div class="col">
                <div class="image">
                    <h1>Music Subscriber</h1>
                </div>
            </div>
            <div class="col">
                
                </div>
            </div>
        </div>
    </div>

    <table class="tablemanager">
        <thead>
            <tr>
                <th>User Id</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Mobile number</th>
                <th>Email Id</th>
                <th>User Name</th>
            </tr>
        </thead>
        <tbody id="body">

        </tbody>
        <tfoot>
            <tr>
                <th>User Id</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Mobile number</th>
                <th>Email Id</th>
                <th>User Name</th>
            </tr>
        </tfoot>
    </table>
    <script>
        var userid = sessionStorage.getItem("userId");
        var storage = sessionStorage.getItem("access_token");
        //here i store accessed token into sessionStorage.getItem method, and put this store variable 
        //on the place of token. after that token expire problem
        //will not happen and there is no need to access token again and again
        
        fetch("http://192.168.0.67/NetCoreAPI/api/home/users?pageNo=1&pageSize=50", {
            // fetch("http://192.168.0.67/NetCoreAPI/api/home/updateuser/3", {
            headers: {
                Authorization: 'Bearer ' + "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI5Njg2OGZjNS01MjExLTQ3ZDYtODE1MS03MTkxODIwZjk4MjIiLCJ1c2VyIjoie1widXNlcklEXCI6MzYsXCJuYW1lXCI6XCJNYW5valwifSIsIm5iZiI6MTY0NTc2NTcwNywiZXhwIjoxNjQ1ODUyMTA3LCJpYXQiOjE2NDU3NjU3MDd9.HtaG3cWwFmsO2aVtEB8Ac7PTj3A5QwLSrer6gfinqUg",
            }
        })
            .then((res) => res.json())
            .then((data) => {
                console.log(data.data.users)
                data.data.users.map((user) => {
                    // data.data.users.forEach((user) => {
                    $("#body").append(`
                        
                    <tr>
                        <td>${user.userID}</td>
                        <td>${user.firstName}</td>
                        <td>${user.lastName}</td>
                        <td>${user.mobileNo}</td>
                        <td>${user.emailID}</td>
                        <td>${user.userName}</td>
                        </tr>
                   `)

                });
                
                $(".tablemanager").tablemanager({
                    firstSort: [[3, 0], [2, 0], [1, 'asc']],

                    appendFilterby: true,
                    dateFormat: [[4, "dd-mm-yyyy"]],
                    debug: true,
                    vocabulary: {
                        voc_filter_by: 'Filter',
                        voc_type_here_filter: 'Search Here...',
                        voc_show_rows: 'Show Entries'
                    },
                    pagination: true,
                    showrows: [5, 10, 20, 50, 100],


                })
            })

    </script>
</body>

</html>