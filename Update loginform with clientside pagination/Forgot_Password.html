<!DOCTYPE html>
<html>

<head>
  <title>
    Forgot_password
  </title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="Forgot_Password.css">
  <link rel="icon" type="image/jpg" href="synsoft.jpg">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.min.js"></script>
</head>

<body>
  <section>
    <section class="vh-100">
      <div class="container py-5 h-100">
        <div class="row d-flex justify-content-center align-items-center h-100">
          <div class="col-12 col-md-8 col-lg-6 col-xl-5">
            <div class="card shadow-2-strong" style="border-radius: 1rem; height: 550px;">
              <form id="forgot_password" action="/examples/actions/confirmation" method="post">
                <div class="card-body p-5 text-center">
                  <img class="mb-3" src="react-logo.png">
                  <h3 class="mb-4">Music Subscriber</h3>
                  <div class="mb-2">
                    To Change your password enter your Email Address
                  </div>
                  <div class="form-outline mb-4">
                    <input type="email" id="mail" class="form-control form-control-lg" name="mail"
                      placeholder="Email *" />
                  </div><br>
                  <button class="btn btn-primary" type="submit" style="width: 200px;">Login</button>
              </form>
            </div>
          </div>
        </div>
      </div>
    </section>
  </section>
  <script>
    $(document).ready(function () {
      $("#forgot_password").submit(function (event) {
        event.preventDefault();
        if ($("#forgot_password").valid()) {
          var userName = $("#mail").val();
          $.ajax({
            url: 'http://192.168.0.67/NetCoreAPI/api/auth/forgotpassword',
            type: 'POST',
            dataType: 'json',
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify({
              "username": userName,
            }),
            success: function (data, textStatus, xhr) {
              console.log(data);
              alert('Password has been sent successfully to your email id ')
              window.location.href = "Login_Form.html";
            },
            error: function (xhr, textStatus, errorThrown) {
              console.log('Error in Database');
            }
          });
        }
      });
    });
    $(document).ready(function () {
      $('#forgot_password').validate({
        rules: {
          mail: {
            required: true
          },
        },
        messages: {
          mail: {
            required: 'Please enter your Email'
          }
        }
      })
    })
  </script>
</body>

</html>